import pandas as pd
import unittest
from scripts import FilePaths
from scripts.documents_filter import DocumentsFilter
from scripts.documents_weights import DocumentsWeights


class TestDocumentsWeights(unittest.TestCase):

    def setUp(self):
        df = pd.read_pickle(FilePaths.us_patents_random_100_pickle_name)
        self.__df = df.reset_index()

    def test_time(self):
        doc_weights = DocumentsWeights(self.__df, True, None, 'publication_date').weights
        self.assertListEqual(list(doc_weights), [0.0,
                                                 0.027777777777777776,
                                                 0.07017543859649122,
                                                 0.08625730994152046,
                                                 0.12426900584795321,
                                                 0.12426900584795321,
                                                 0.14473684210526316,
                                                 0.15789473684210525,
                                                 0.1783625730994152,
                                                 0.17982456140350878,
                                                 0.1827485380116959,
                                                 0.18567251461988304,
                                                 0.19298245614035087,
                                                 0.19736842105263158,
                                                 0.2149122807017544,
                                                 0.24853801169590642,
                                                 0.27631578947368424,
                                                 0.2777777777777778,
                                                 0.2850877192982456,
                                                 0.29239766081871343,
                                                 0.36403508771929827,
                                                 0.3684210526315789,
                                                 0.37280701754385964,
                                                 0.3757309941520468,
                                                 0.3961988304093567,
                                                 0.3991228070175439,
                                                 0.41812865497076024,
                                                 0.42251461988304095,
                                                 0.44590643274853803,
                                                 0.4502923976608187,
                                                 0.45321637426900585,
                                                 0.4619883040935672,
                                                 0.47368421052631576,
                                                 0.4766081871345029,
                                                 0.5073099415204678,
                                                 0.5160818713450293,
                                                 0.5190058479532164,
                                                 0.52046783625731,
                                                 0.533625730994152,
                                                 0.5365497076023392,
                                                 0.5453216374269005,
                                                 0.554093567251462,
                                                 0.554093567251462,
                                                 0.5584795321637427,
                                                 0.564327485380117,
                                                 0.5716374269005848,
                                                 0.5745614035087719,
                                                 0.5745614035087719,
                                                 0.5994152046783626,
                                                 0.6038011695906432,
                                                 0.6374269005847953,
                                                 0.6374269005847953,
                                                 0.6535087719298246,
                                                 0.6608187134502924,
                                                 0.6769005847953217,
                                                 0.6944444444444444,
                                                 0.7032163742690059,
                                                 0.706140350877193,
                                                 0.7090643274853801,
                                                 0.7324561403508771,
                                                 0.7368421052631579,
                                                 0.7368421052631579,
                                                 0.7456140350877193,
                                                 0.75,
                                                 0.7543859649122807,
                                                 0.7675438596491229,
                                                 0.7719298245614035,
                                                 0.7748538011695907,
                                                 0.7850877192982456,
                                                 0.7967836257309941,
                                                 0.8055555555555556,
                                                 0.8084795321637427,
                                                 0.8128654970760234,
                                                 0.8128654970760234,
                                                 0.814327485380117,
                                                 0.8157894736842105,
                                                 0.8172514619883041,
                                                 0.8245614035087719,
                                                 0.8333333333333334,
                                                 0.8421052631578947,
                                                 0.8494152046783626,
                                                 0.8552631578947368,
                                                 0.8625730994152047,
                                                 0.868421052631579,
                                                 0.8698830409356725,
                                                 0.8786549707602339,
                                                 0.8786549707602339,
                                                 0.8801169590643275,
                                                 0.8859649122807017,
                                                 0.8932748538011696,
                                                 0.9093567251461988,
                                                 0.9385964912280702,
                                                 0.9532163742690059,
                                                 0.9722222222222222,
                                                 0.9736842105263158,
                                                 0.9751461988304093,
                                                 0.9780701754385965,
                                                 0.9883040935672515,
                                                 1.0,
                                                 1.0])

    def test_cite(self):
        print('pass')
        # TODO


if __name__ == '__main__':
    unittest.main()
